# ç…§ç‰‡ç­¾åˆ°åŠŸèƒ½ - æ•™å¸ˆç«¯å®¡æ‰¹ç•Œé¢å®ç°æ€»ç»“

## ğŸ“‹ å®ç°æ¦‚è¿°

æœ¬æ¬¡ä¿®æ”¹ä¸ºæ•™å¸ˆç«¯è€ƒå‹¤ç®¡ç†é¡µé¢ `AttendanceSheet.tsx` æ·»åŠ äº†å®Œæ•´çš„ç…§ç‰‡ç­¾åˆ°å®¡æ‰¹åŠŸèƒ½ï¼ŒåŒ…æ‹¬ï¼š
1. æ‰©å±•å­¦ç”Ÿæ•°æ®ç±»å‹ä»¥æ”¯æŒç…§ç‰‡ç­¾åˆ°å­—æ®µ
2. æ·»åŠ ç…§ç‰‡å®¡æ ¸å¯¹è¯æ¡†ç»„ä»¶
3. å®ç°å®¡æ‰¹æŒ‰é’®å’ŒçŠ¶æ€æ˜¾ç¤º
4. é›†æˆå®¡æ‰¹æ¥å£è°ƒç”¨

---

## ğŸ”§ ä¿®æ”¹å†…å®¹

### 1. æ•°æ®ç±»å‹æ‰©å±•

**æ–‡ä»¶**: `apps/agendaedu-app/src/pages/AttendanceSheet.tsx`

#### 1.1 æ‰©å±• `StudentAttendanceDetail` æ¥å£

**ä¿®æ”¹å‰**ï¼š
```typescript
interface StudentAttendanceDetail {
  student_id: string;
  student_name: string | null;
  class_name: string | null;
  major_name: string | null;
  absence_type:
    | 'present'
    | 'absent'
    | 'leave'
    | 'leave_pending'
    | 'unstarted'
    | 'truant';
  checkin_time?: string | Date | null;
}
```

**ä¿®æ”¹å**ï¼š
```typescript
interface StudentAttendanceDetail {
  student_id: string;
  student_name: string | null;
  class_name: string | null;
  major_name: string | null;
  absence_type:
    | 'present'
    | 'absent'
    | 'leave'
    | 'leave_pending'
    | 'unstarted'
    | 'truant'
    | 'pending_approval'; // âœ… æ–°å¢ï¼šç…§ç‰‡ç­¾åˆ°å¾…å®¡æ ¸
  checkin_time?: string | Date | null;
  
  // âœ… æ–°å¢å­—æ®µ
  attendance_record_id?: number | null; // ç”¨äºå®¡æ‰¹æ¥å£
  checkin_location?: string | null;
  checkin_latitude?: number | null;
  checkin_longitude?: number | null;
  checkin_accuracy?: number | null;
  metadata?: {
    photo_url?: string; // ç…§ç‰‡ URL
    location_offset_distance?: number; // ä½ç½®åç§»è·ç¦»ï¼ˆç±³ï¼‰
    reason?: string;
  } | null;
}
```

---

### 2. çŠ¶æ€ç®¡ç†

**æ–‡ä»¶**: `apps/agendaedu-app/src/pages/AttendanceSheet.tsx` (Lines 177-183)

#### 2.1 æ·»åŠ ç…§ç‰‡å®¡æ ¸å¯¹è¯æ¡†çŠ¶æ€

```typescript
// ç…§ç‰‡ç­¾åˆ°å®¡æ ¸å¯¹è¯æ¡†çŠ¶æ€
const [photoApprovalStudent, setPhotoApprovalStudent] =
  useState<StudentAttendanceDetail | null>(null);
const [isPhotoApprovalDialogOpen, setIsPhotoApprovalDialogOpen] =
  useState(false);
const [isApprovingPhoto, setIsApprovingPhoto] = useState(false);
```

**çŠ¶æ€è¯´æ˜**ï¼š
- `photoApprovalStudent`: å½“å‰å¾…å®¡æ ¸çš„å­¦ç”Ÿä¿¡æ¯
- `isPhotoApprovalDialogOpen`: å¯¹è¯æ¡†æ˜¯å¦æ‰“å¼€
- `isApprovingPhoto`: æ˜¯å¦æ­£åœ¨æäº¤å®¡æ‰¹è¯·æ±‚

---

### 3. å®¡æ‰¹å¤„ç†å‡½æ•°

**æ–‡ä»¶**: `apps/agendaedu-app/src/pages/AttendanceSheet.tsx` (Lines 796-857)

#### 3.1 æ‰“å¼€ç…§ç‰‡å®¡æ ¸å¯¹è¯æ¡†

```typescript
const handleOpenPhotoApprovalDialog = (student: StudentAttendanceDetail) => {
  setPhotoApprovalStudent(student);
  setIsPhotoApprovalDialogOpen(true);
};
```

#### 3.2 å…³é—­ç…§ç‰‡å®¡æ ¸å¯¹è¯æ¡†

```typescript
const handleClosePhotoApprovalDialog = () => {
  if (!isApprovingPhoto) {
    setIsPhotoApprovalDialogOpen(false);
    setPhotoApprovalStudent(null);
  }
};
```

#### 3.3 æ‰¹å‡†ç…§ç‰‡ç­¾åˆ°

```typescript
const handleApprovePhotoCheckin = async () => {
  if (!photoApprovalStudent?.attendance_record_id) {
    toast.error('å®¡æ‰¹å¤±è´¥', {
      description: 'ç¼ºå°‘ç­¾åˆ°è®°å½•ID',
      duration: 4000
    });
    return;
  }

  setIsApprovingPhoto(true);

  try {
    const response = await icaLinkApiClient.post(
      `/icalink/v1/attendance/records/${photoApprovalStudent.attendance_record_id}/approve`,
      {}
    );

    if (response.success) {
      toast.success('ç…§ç‰‡ç­¾åˆ°å·²æ‰¹å‡†', {
        description: 'å­¦ç”Ÿè€ƒå‹¤çŠ¶æ€å·²æ›´æ–°ä¸ºå·²ç­¾åˆ°',
        duration: 3000
      });

      // å…³é—­å¯¹è¯æ¡†
      setIsPhotoApprovalDialogOpen(false);
      setPhotoApprovalStudent(null);

      // åˆ·æ–°æ•°æ®
      await loadTeacherAttendanceData();
    } else {
      toast.error('å®¡æ‰¹å¤±è´¥', {
        description: response.message || 'è¯·é‡è¯•',
        duration: 4000
      });
    }
  } catch (error) {
    console.error('å®¡æ‰¹ç…§ç‰‡ç­¾åˆ°å¤±è´¥:', error);
    toast.error('å®¡æ‰¹å¤±è´¥', {
      description: error instanceof Error ? error.message : 'è¯·é‡è¯•',
      duration: 4000
    });
  } finally {
    setIsApprovingPhoto(false);
  }
};
```

**æ¥å£è°ƒç”¨**ï¼š
- **è·¯å¾„**: `POST /icalink/v1/attendance/records/:id/approve`
- **å‚æ•°**: æ— éœ€é¢å¤–å‚æ•°ï¼ˆ`attendance_record_id` åœ¨ URL ä¸­ï¼‰
- **æˆåŠŸå**: æ˜¾ç¤ºæˆåŠŸæç¤º â†’ å…³é—­å¯¹è¯æ¡† â†’ åˆ·æ–°æ•°æ®

---

### 4. çŠ¶æ€æ˜¾ç¤ºå‡½æ•°æ›´æ–°

**æ–‡ä»¶**: `apps/agendaedu-app/src/pages/AttendanceSheet.tsx`

#### 4.1 æ›´æ–° `getStatusIcon` å‡½æ•° (Lines 941-957)

```typescript
const getStatusIcon = (status: StudentAttendanceDetail['absence_type']) => {
  switch (status) {
    // ... å…¶ä»–çŠ¶æ€
    case 'pending_approval':
      return <AlertCircle className='h-4 w-4 text-yellow-500' />; // âœ… æ–°å¢
    default:
      return <XCircle className='h-4 w-4 text-gray-500' />;
  }
};
```

#### 4.2 æ›´æ–° `getStatusText` å‡½æ•° (Lines 959-979)

```typescript
const getStatusText = (status: StudentAttendanceDetail['absence_type']) => {
  switch (status) {
    // ... å…¶ä»–çŠ¶æ€
    case 'pending_approval':
      return 'ç­¾åˆ°å¾…å®¡æ ¸'; // âœ… æ–°å¢
    default:
      return 'æœªçŸ¥';
  }
};
```

#### 4.3 æ›´æ–° `getStatusColor` å‡½æ•° (Lines 1009-1026)

```typescript
const getStatusColor = (status: StudentAttendanceDetail['absence_type']) => {
  switch (status) {
    // ... å…¶ä»–çŠ¶æ€
    case 'pending_approval':
      return 'text-yellow-600 bg-yellow-50'; // âœ… æ–°å¢ï¼šé»„è‰²æ ‡è¯†
    default:
      return 'text-gray-600 bg-gray-50';
  }
};
```

---

### 5. å­¦ç”Ÿåˆ—è¡¨æ¸²æŸ“æ›´æ–°

**æ–‡ä»¶**: `apps/agendaedu-app/src/pages/AttendanceSheet.tsx` (Lines 1351-1405)

#### 5.1 æ·»åŠ ç…§ç‰‡å®¡æ ¸æŒ‰é’®

åœ¨å­¦ç”Ÿåˆ—è¡¨æ¸²æŸ“ä¸­ï¼Œæ·»åŠ äº†ç…§ç‰‡ç­¾åˆ°å¾…å®¡æ ¸çš„æ¡ä»¶åˆ¤æ–­ï¼š

```typescript
{/* çŠ¶æ€æ ‡ç­¾ - æ ¹æ®è¯¾ç¨‹çŠ¶æ€å’Œå­¦ç”ŸçŠ¶æ€æ˜¾ç¤ºä¸åŒå†…å®¹ */}
{student.absence_type === 'pending_approval' &&
student.metadata?.photo_url ? (
  // ç…§ç‰‡ç­¾åˆ°å¾…å®¡æ ¸ï¼šæ˜¾ç¤ºçŠ¶æ€æ ‡ç­¾ + å®¡æ ¸æŒ‰é’®
  <div className='flex items-center space-x-2'>
    {/* å…ˆæ˜¾ç¤ºçŠ¶æ€æ ‡ç­¾ */}
    <span
      className={`flex items-center space-x-1 rounded-full px-2 py-1 text-xs ${getStatusColor(
        student.absence_type
      )}`}
    >
      {getStatusIcon(student.absence_type)}
      <span>
        {getStatusText(student.absence_type)}
      </span>
    </span>
    {/* å†æ˜¾ç¤ºå®¡æ ¸æŒ‰é’® - å¾®ä¿¡é£æ ¼ç»¿åº•ç™½å­— */}
    <button
      type='button'
      onClick={() =>
        handleOpenPhotoApprovalDialog(student)
      }
      className='rounded-md bg-[#07C160] px-3 py-1.5 text-xs font-medium text-white transition-colors hover:bg-[#06AD56] active:bg-[#059048]'
    >
      å®¡æ ¸
    </button>
  </div>
) : student.absence_type === 'leave_pending' &&
  // ... å…¶ä»–æ¡ä»¶
```

**æ˜¾ç¤ºæ¡ä»¶**ï¼š
- âœ… `absence_type === 'pending_approval'`
- âœ… `metadata.photo_url` å­˜åœ¨ï¼ˆç¡®è®¤æ˜¯ç…§ç‰‡ç­¾åˆ°ï¼‰

**æŒ‰é’®æ ·å¼**ï¼š
- æ–‡æœ¬ï¼š**"å®¡æ ¸"**
- é¢œè‰²ï¼šå¾®ä¿¡é£æ ¼ç»¿è‰² (`#07C160`)
- ä½ç½®ï¼šçŠ¶æ€æ ‡ç­¾å³ä¾§

---

### 6. ç…§ç‰‡å®¡æ ¸å¯¹è¯æ¡†ç»„ä»¶

**æ–‡ä»¶**: `apps/agendaedu-app/src/components/PhotoApprovalDialog.tsx`

#### 6.1 ç»„ä»¶ç»“æ„

```typescript
interface PhotoApprovalDialogProps {
  isOpen: boolean;
  student: StudentAttendanceDetail;
  onClose: () => void;
  onApprove: () => Promise<void>;
  isSubmitting: boolean;
}
```

#### 6.2 å¯¹è¯æ¡†å†…å®¹

**1. å­¦ç”Ÿä¿¡æ¯**ï¼š
- å§“å
- å­¦å·
- ç­çº§

**2. ç…§ç‰‡å±•ç¤º**ï¼š
- æ˜¾ç¤ºå­¦ç”Ÿä¸Šä¼ çš„ç…§ç‰‡ï¼ˆ`metadata.photo_url`ï¼‰
- ç…§ç‰‡åŠ è½½çŠ¶æ€ï¼ˆåŠ è½½ä¸­ã€åŠ è½½å¤±è´¥ï¼‰
- æœ€å¤§é«˜åº¦ï¼š400px
- æ”¯æŒè‡ªé€‚åº”ç¼©æ”¾

**3. ä½ç½®ä¿¡æ¯**ï¼š
- ç­¾åˆ°ä½ç½®ï¼š`checkin_location`
- ä½ç½®åç§»è·ç¦»ï¼š`metadata.location_offset_distance`ï¼ˆå•ä½ï¼šç±³ï¼‰
  - è¶…è¿‡ 100 ç±³æ—¶ç”¨çº¢è‰²æ ‡æ³¨
- ç­¾åˆ°åæ ‡ï¼š`checkin_latitude`, `checkin_longitude`ï¼ˆå¯é€‰æ˜¾ç¤ºï¼‰
- å®šä½ç²¾åº¦ï¼š`checkin_accuracy`ï¼ˆå¯é€‰æ˜¾ç¤ºï¼‰

**4. ç­¾åˆ°æ—¶é—´**ï¼š
- æ˜¾ç¤º `checkin_time`
- æ ¼å¼ï¼š`YYYY/MM/DD HH:mm:ss`

**5. å¤‡æ³¨ä¿¡æ¯**ï¼ˆå¯é€‰ï¼‰ï¼š
- æ˜¾ç¤º `metadata.reason`

**6. æ“ä½œæŒ‰é’®**ï¼š
- **"å–æ¶ˆ"æŒ‰é’®**ï¼šå…³é—­å¯¹è¯æ¡†ï¼Œä¸æ‰§è¡Œä»»ä½•æ“ä½œ
- **"æ‰¹å‡†"æŒ‰é’®**ï¼š
  - è°ƒç”¨ `onApprove` å‡½æ•°
  - æäº¤å®¡æ‰¹è¯·æ±‚
  - æ˜¾ç¤ºåŠ è½½çŠ¶æ€ï¼ˆ"å®¡æ‰¹ä¸­..."ï¼‰
  - å¦‚æœç…§ç‰‡åŠ è½½å¤±è´¥ï¼Œç¦ç”¨æŒ‰é’®

#### 6.3 ç‰¹æ®Šå¤„ç†

**ç…§ç‰‡åŠ è½½çŠ¶æ€**ï¼š
```typescript
const [imageError, setImageError] = useState(false);
const [imageLoading, setImageLoading] = useState(true);

const handleImageLoad = () => {
  setImageLoading(false);
};

const handleImageError = () => {
  setImageLoading(false);
  setImageError(true);
};
```

**ä½ç½®åç§»è·ç¦»å¼‚å¸¸åˆ¤æ–­**ï¼š
```typescript
const isOffsetExcessive = (distance?: number) => {
  if (!distance) return false;
  return distance > 100; // è¶…è¿‡100ç±³è§†ä¸ºå¼‚å¸¸
};
```

---

### 7. å¯¹è¯æ¡†é›†æˆ

**æ–‡ä»¶**: `apps/agendaedu-app/src/pages/AttendanceSheet.tsx` (Lines 1658-1666)

```typescript
{/* ç…§ç‰‡ç­¾åˆ°å®¡æ ¸å¯¹è¯æ¡† */}
{photoApprovalStudent && isPhotoApprovalDialogOpen && (
  <PhotoApprovalDialog
    isOpen={isPhotoApprovalDialogOpen}
    student={photoApprovalStudent}
    onClose={handleClosePhotoApprovalDialog}
    onApprove={handleApprovePhotoCheckin}
    isSubmitting={isApprovingPhoto}
  />
)}
```

---

## ğŸ“Š ç”¨æˆ·äº¤äº’æµç¨‹

### æ•™å¸ˆå®¡æ‰¹ç…§ç‰‡ç­¾åˆ°æµç¨‹

```
1. æ•™å¸ˆæ‰“å¼€è€ƒå‹¤ç®¡ç†é¡µé¢
   â†“
2. æŸ¥çœ‹å­¦ç”Ÿåˆ—è¡¨
   - å¾…å®¡æ‰¹çš„ç…§ç‰‡ç­¾åˆ°æ’åœ¨æœ€å‰é¢ï¼ˆåç«¯å·²å®ç°æ’åºï¼‰
   - çŠ¶æ€æ˜¾ç¤ºï¼šé»„è‰²æ ‡ç­¾ "ç­¾åˆ°å¾…å®¡æ ¸"
   - æ“ä½œæŒ‰é’®ï¼šç»¿è‰² "å®¡æ ¸" æŒ‰é’®
   â†“
3. ç‚¹å‡»"å®¡æ ¸"æŒ‰é’®
   â†“
4. å¼¹å‡ºç…§ç‰‡å®¡æ ¸å¯¹è¯æ¡†
   - æ˜¾ç¤ºå­¦ç”Ÿä¿¡æ¯ï¼ˆå§“åã€å­¦å·ã€ç­çº§ï¼‰
   - æ˜¾ç¤ºç­¾åˆ°ç…§ç‰‡ï¼ˆæ”¯æŒåŠ è½½çŠ¶æ€å’Œé”™è¯¯å¤„ç†ï¼‰
   - æ˜¾ç¤ºä½ç½®ä¿¡æ¯ï¼ˆä½ç½®ã€åç§»è·ç¦»ã€åæ ‡ã€ç²¾åº¦ï¼‰
   - æ˜¾ç¤ºç­¾åˆ°æ—¶é—´
   - æ˜¾ç¤ºå¤‡æ³¨ï¼ˆå¦‚æœæœ‰ï¼‰
   â†“
5. æ•™å¸ˆæŸ¥çœ‹ç…§ç‰‡å’Œä¿¡æ¯
   - å¦‚æœä½ç½®åç§»è·ç¦» > 100ç±³ï¼Œçº¢è‰²æ ‡æ³¨æé†’
   â†“
6. æ•™å¸ˆç‚¹å‡»"æ‰¹å‡†"æŒ‰é’®
   â†“
7. è°ƒç”¨å®¡æ‰¹æ¥å£
   - POST /icalink/v1/attendance/records/:id/approve
   â†“
8. å®¡æ‰¹æˆåŠŸ
   - æ˜¾ç¤ºæˆåŠŸæç¤ºï¼š"ç…§ç‰‡ç­¾åˆ°å·²æ‰¹å‡†"
   - å…³é—­å¯¹è¯æ¡†
   - åˆ·æ–°å­¦ç”Ÿåˆ—è¡¨
   - å­¦ç”ŸçŠ¶æ€å˜ä¸º"å·²ç­¾åˆ°"ï¼ˆç»¿è‰²ï¼‰
   â†“
9. å®¡æ‰¹å¤±è´¥
   - æ˜¾ç¤ºé”™è¯¯æç¤º
   - å¯¹è¯æ¡†ä¿æŒæ‰“å¼€
   - æ•™å¸ˆå¯ä»¥é‡è¯•æˆ–å–æ¶ˆ
```

---

## âœ… åŠŸèƒ½ç‰¹æ€§

### 1. çŠ¶æ€æ˜¾ç¤º
- âœ… `pending_approval` çŠ¶æ€æ˜¾ç¤ºä¸º"ç­¾åˆ°å¾…å®¡æ ¸"
- âœ… ä½¿ç”¨é»„è‰²æ ‡è¯†ï¼ˆ`text-yellow-600 bg-yellow-50`ï¼‰
- âœ… ä½¿ç”¨è­¦å‘Šå›¾æ ‡ï¼ˆ`AlertCircle`ï¼‰

### 2. å®¡æ ¸æŒ‰é’®
- âœ… ä»…åœ¨ `absence_type === 'pending_approval'` ä¸” `metadata.photo_url` å­˜åœ¨æ—¶æ˜¾ç¤º
- âœ… å¾®ä¿¡é£æ ¼ç»¿è‰²æŒ‰é’®ï¼ˆ`#07C160`ï¼‰
- âœ… æŒ‰é’®æ–‡æœ¬ï¼š"å®¡æ ¸"

### 3. ç…§ç‰‡å®¡æ ¸å¯¹è¯æ¡†
- âœ… æ˜¾ç¤ºå­¦ç”ŸåŸºæœ¬ä¿¡æ¯
- âœ… æ˜¾ç¤ºç­¾åˆ°ç…§ç‰‡ï¼ˆæ”¯æŒåŠ è½½çŠ¶æ€å’Œé”™è¯¯å¤„ç†ï¼‰
- âœ… æ˜¾ç¤ºä½ç½®ä¿¡æ¯ï¼ˆä½ç½®ã€åç§»è·ç¦»ã€åæ ‡ã€ç²¾åº¦ï¼‰
- âœ… ä½ç½®åç§»è·ç¦»è¶…è¿‡ 100 ç±³æ—¶çº¢è‰²æ ‡æ³¨
- âœ… æ˜¾ç¤ºç­¾åˆ°æ—¶é—´ï¼ˆæ ¼å¼åŒ–æ˜¾ç¤ºï¼‰
- âœ… æ˜¾ç¤ºå¤‡æ³¨ä¿¡æ¯ï¼ˆå¦‚æœæœ‰ï¼‰
- âœ… æä¾›"å–æ¶ˆ"å’Œ"æ‰¹å‡†"æŒ‰é’®

### 4. å®¡æ‰¹åŠŸèƒ½
- âœ… è°ƒç”¨åç«¯å®¡æ‰¹æ¥å£
- âœ… æ˜¾ç¤ºåŠ è½½çŠ¶æ€ï¼ˆ"å®¡æ‰¹ä¸­..."ï¼‰
- âœ… æˆåŠŸåæ˜¾ç¤ºæç¤ºå¹¶åˆ·æ–°æ•°æ®
- âœ… å¤±è´¥åæ˜¾ç¤ºé”™è¯¯æç¤º
- âœ… ç…§ç‰‡åŠ è½½å¤±è´¥æ—¶ç¦ç”¨æ‰¹å‡†æŒ‰é’®

### 5. é”™è¯¯å¤„ç†
- âœ… ç¼ºå°‘ `attendance_record_id` æ—¶æ˜¾ç¤ºé”™è¯¯æç¤º
- âœ… ç…§ç‰‡åŠ è½½å¤±è´¥æ—¶æ˜¾ç¤ºå ä½å›¾
- âœ… æ¥å£è°ƒç”¨å¤±è´¥æ—¶æ˜¾ç¤ºé”™è¯¯æç¤º
- âœ… å®¡æ‰¹æœŸé—´ç¦æ­¢å…³é—­å¯¹è¯æ¡†

---

## ğŸ§ª æµ‹è¯•éªŒè¯

### æµ‹è¯•åœºæ™¯ 1: æŸ¥çœ‹å¾…å®¡æ‰¹ç…§ç‰‡ç­¾åˆ°

**æ“ä½œæ­¥éª¤**ï¼š
1. å­¦ç”Ÿæäº¤ç…§ç‰‡ç­¾åˆ°
2. æ•™å¸ˆæ‰“å¼€è€ƒå‹¤ç®¡ç†é¡µé¢
3. æŸ¥çœ‹å­¦ç”Ÿåˆ—è¡¨

**é¢„æœŸç»“æœ**ï¼š
- âœ… å¾…å®¡æ‰¹çš„å­¦ç”Ÿæ’åœ¨åˆ—è¡¨å‰é¢
- âœ… çŠ¶æ€æ˜¾ç¤ºä¸º"ç­¾åˆ°å¾…å®¡æ ¸"ï¼ˆé»„è‰²æ ‡ç­¾ï¼‰
- âœ… æ˜¾ç¤º"å®¡æ ¸"æŒ‰é’®ï¼ˆç»¿è‰²ï¼‰

### æµ‹è¯•åœºæ™¯ 2: å®¡æ ¸ç…§ç‰‡ç­¾åˆ°

**æ“ä½œæ­¥éª¤**ï¼š
1. ç‚¹å‡»"å®¡æ ¸"æŒ‰é’®
2. æŸ¥çœ‹å¯¹è¯æ¡†å†…å®¹

**é¢„æœŸç»“æœ**ï¼š
- âœ… å¯¹è¯æ¡†æ­£ç¡®æ˜¾ç¤ºå­¦ç”Ÿä¿¡æ¯
- âœ… ç…§ç‰‡æ­£ç¡®åŠ è½½å¹¶æ˜¾ç¤º
- âœ… ä½ç½®ä¿¡æ¯æ­£ç¡®æ˜¾ç¤º
- âœ… ç­¾åˆ°æ—¶é—´æ­£ç¡®æ ¼å¼åŒ–
- âœ… å¦‚æœä½ç½®åç§»è·ç¦» > 100ç±³ï¼Œæ˜¾ç¤ºçº¢è‰²æ ‡æ³¨

### æµ‹è¯•åœºæ™¯ 3: æ‰¹å‡†ç…§ç‰‡ç­¾åˆ°

**æ“ä½œæ­¥éª¤**ï¼š
1. ç‚¹å‡»"æ‰¹å‡†"æŒ‰é’®
2. ç­‰å¾…å®¡æ‰¹å®Œæˆ

**é¢„æœŸç»“æœ**ï¼š
- âœ… æŒ‰é’®æ˜¾ç¤º"å®¡æ‰¹ä¸­..."
- âœ… æ¥å£è°ƒç”¨æˆåŠŸ
- âœ… æ˜¾ç¤ºæˆåŠŸæç¤ºï¼š"ç…§ç‰‡ç­¾åˆ°å·²æ‰¹å‡†"
- âœ… å¯¹è¯æ¡†è‡ªåŠ¨å…³é—­
- âœ… å­¦ç”Ÿåˆ—è¡¨è‡ªåŠ¨åˆ·æ–°
- âœ… å­¦ç”ŸçŠ¶æ€å˜ä¸º"å·²ç­¾åˆ°"ï¼ˆç»¿è‰²ï¼‰

### æµ‹è¯•åœºæ™¯ 4: ç…§ç‰‡åŠ è½½å¤±è´¥

**æ“ä½œæ­¥éª¤**ï¼š
1. æ¨¡æ‹Ÿç…§ç‰‡ URL æ— æ•ˆ
2. æ‰“å¼€å®¡æ ¸å¯¹è¯æ¡†

**é¢„æœŸç»“æœ**ï¼š
- âœ… æ˜¾ç¤ºç…§ç‰‡åŠ è½½å¤±è´¥å ä½å›¾
- âœ… "æ‰¹å‡†"æŒ‰é’®è¢«ç¦ç”¨
- âœ… æ˜¾ç¤ºé”™è¯¯æç¤º

### æµ‹è¯•åœºæ™¯ 5: å®¡æ‰¹å¤±è´¥

**æ“ä½œæ­¥éª¤**ï¼š
1. æ¨¡æ‹Ÿæ¥å£è°ƒç”¨å¤±è´¥
2. ç‚¹å‡»"æ‰¹å‡†"æŒ‰é’®

**é¢„æœŸç»“æœ**ï¼š
- âœ… æ˜¾ç¤ºé”™è¯¯æç¤º
- âœ… å¯¹è¯æ¡†ä¿æŒæ‰“å¼€
- âœ… å¯ä»¥é‡è¯•æˆ–å–æ¶ˆ

---

## ğŸ“ æ³¨æ„äº‹é¡¹

### 1. æƒé™æ§åˆ¶
- âœ… ä»…æ•™å¸ˆè§’è‰²èƒ½çœ‹åˆ°å®¡æ ¸æŒ‰é’®
- âœ… åç«¯å·²å®ç°æƒé™éªŒè¯

### 2. æ•°æ®ä¸€è‡´æ€§
- âœ… å®¡æ‰¹ååˆ·æ–°æ•°æ®ç¡®ä¿ UI ä¸åç«¯ä¸€è‡´
- âœ… ä½¿ç”¨ `loadTeacherAttendanceData()` é‡æ–°è·å–æ•°æ®

### 3. ç”¨æˆ·ä½“éªŒ
- âœ… å®¡æ‰¹æœŸé—´æ˜¾ç¤ºåŠ è½½çŠ¶æ€
- âœ… æˆåŠŸ/å¤±è´¥éƒ½æœ‰æ˜ç¡®çš„æç¤º
- âœ… ç…§ç‰‡åŠ è½½å¤±è´¥æ—¶ç¦ç”¨æ‰¹å‡†æŒ‰é’®
- âœ… ä½ç½®åç§»è·ç¦»å¼‚å¸¸æ—¶çº¢è‰²æ ‡æ³¨

### 4. æ ·å¼ä¸€è‡´æ€§
- âœ… å®¡æ ¸æŒ‰é’®ä½¿ç”¨å¾®ä¿¡é£æ ¼ç»¿è‰²ï¼ˆä¸è¡¥ç­¾ã€è¯·å‡å®¡æ‰¹æŒ‰é’®ä¸€è‡´ï¼‰
- âœ… çŠ¶æ€æ ‡ç­¾ä½¿ç”¨é»„è‰²ï¼ˆä¸è¯·å‡å¾…å®¡æ‰¹çš„æ©™è‰²åŒºåˆ†ï¼‰

---

## ğŸ‰ æ€»ç»“

æœ¬æ¬¡ä¿®æ”¹å®Œæˆäº†æ•™å¸ˆç«¯ç…§ç‰‡ç­¾åˆ°å®¡æ‰¹åŠŸèƒ½çš„å®Œæ•´å®ç°ï¼š

1. âœ… **æ•°æ®ç±»å‹æ‰©å±•**ï¼šæ·»åŠ  `pending_approval` çŠ¶æ€å’Œç…§ç‰‡ç­¾åˆ°ç›¸å…³å­—æ®µ
2. âœ… **çŠ¶æ€æ˜¾ç¤º**ï¼šé»„è‰²æ ‡ç­¾ + è­¦å‘Šå›¾æ ‡
3. âœ… **å®¡æ ¸æŒ‰é’®**ï¼šå¾®ä¿¡é£æ ¼ç»¿è‰²æŒ‰é’®ï¼Œä»…åœ¨å¾…å®¡æ‰¹ç…§ç‰‡ç­¾åˆ°æ—¶æ˜¾ç¤º
4. âœ… **ç…§ç‰‡å®¡æ ¸å¯¹è¯æ¡†**ï¼šå®Œæ•´æ˜¾ç¤ºå­¦ç”Ÿä¿¡æ¯ã€ç…§ç‰‡ã€ä½ç½®ã€æ—¶é—´ç­‰
5. âœ… **å®¡æ‰¹åŠŸèƒ½**ï¼šè°ƒç”¨åç«¯æ¥å£ï¼ŒæˆåŠŸååˆ·æ–°æ•°æ®
6. âœ… **é”™è¯¯å¤„ç†**ï¼šç…§ç‰‡åŠ è½½å¤±è´¥ã€æ¥å£è°ƒç”¨å¤±è´¥ç­‰åœºæ™¯

ä»£ç å·²å‡†å¤‡å°±ç»ªï¼Œå¯ä»¥è¿›è¡Œæµ‹è¯•å’Œéƒ¨ç½²ï¼ğŸš€

