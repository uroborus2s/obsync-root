# 生产环境部署检查清单

## 部署前检查 (Pre-Deployment)

### 环境准备
- [ ] 确认服务器访问权限 (SSH密钥配置)
- [ ] 检查服务器资源 (CPU、内存、磁盘空间)
- [ ] 验证网络连接 (服务器间通信)
- [ ] 确认域名解析 (kwps.jlufe.edu.cn)
- [ ] 检查SSL证书有效期

### 代码准备
- [ ] 代码已提交到正确分支
- [ ] 本地构建测试通过
- [ ] 单元测试全部通过
- [ ] 集成测试验证完成
- [ ] 安全扫描无高危漏洞

### 配置文件检查
- [ ] Nginx配置文件语法正确
- [ ] Docker Compose配置验证
- [ ] 环境变量配置完整
- [ ] SSL证书文件完整
- [ ] 监控脚本配置正确

### 备份准备
- [ ] 创建当前配置备份
- [ ] 创建数据文件备份
- [ ] 验证备份文件完整性
- [ ] 准备回滚方案
- [ ] 确认备份存储位置

## 部署过程检查 (During Deployment)

### 主服务器部署
- [ ] SSH连接正常
- [ ] 系统服务状态检查
- [ ] Nginx配置部署成功
- [ ] SSL证书部署成功
- [ ] Docker服务启动成功
- [ ] 容器健康检查通过

### 备用服务器部署
- [ ] SSH连接正常
- [ ] Docker服务启动成功
- [ ] 静态文件部署成功
- [ ] 文件权限设置正确
- [ ] 容器健康检查通过

### 网络配置
- [ ] 负载均衡配置生效
- [ ] 防火墙规则正确
- [ ] 端口映射正确
- [ ] 内网通信正常
- [ ] 外网访问正常

### 监控系统
- [ ] 健康检查脚本安装
- [ ] 系统监控脚本安装
- [ ] Crontab任务配置
- [ ] 日志轮转配置
- [ ] 告警机制测试

## 部署后验证 (Post-Deployment)

### 功能验证
- [ ] 主页面访问正常 (https://kwps.jlufe.edu.cn/)
- [ ] Web管理端访问正常 (https://kwps.jlufe.edu.cn/web/)
- [ ] 移动端应用访问正常 (https://kwps.jlufe.edu.cn/app/)
- [ ] API服务响应正常 (https://kwps.jlufe.edu.cn/api/health)
- [ ] 健康检查端点正常 (https://kwps.jlufe.edu.cn/health)

### 性能验证
- [ ] 页面加载时间 < 3秒
- [ ] API响应时间 < 1秒
- [ ] 静态资源缓存生效
- [ ] Gzip压缩生效
- [ ] CDN加速生效 (如适用)

### 安全验证
- [ ] HTTPS强制跳转生效
- [ ] 安全头设置正确
- [ ] SSL证书链完整
- [ ] 防火墙规则生效
- [ ] 敏感端口未暴露

### 监控验证
- [ ] 系统监控数据正常
- [ ] 应用监控数据正常
- [ ] 日志记录正常
- [ ] 告警机制正常
- [ ] 备份任务正常

### 故障转移验证
- [ ] 主服务器故障模拟
- [ ] 备用服务器接管
- [ ] 服务恢复测试
- [ ] 数据一致性检查
- [ ] 负载均衡切换

## 回滚检查 (Rollback)

### 回滚触发条件
- [ ] 关键功能不可用
- [ ] 性能严重下降
- [ ] 安全漏洞发现
- [ ] 数据完整性问题
- [ ] 用户反馈严重问题

### 回滚执行
- [ ] 停止新版本服务
- [ ] 恢复配置文件
- [ ] 恢复数据文件
- [ ] 重启相关服务
- [ ] 验证回滚结果

### 回滚后验证
- [ ] 所有功能正常
- [ ] 性能恢复正常
- [ ] 数据完整性确认
- [ ] 用户访问正常
- [ ] 监控数据正常

## 文档更新 (Documentation)

### 部署记录
- [ ] 更新部署日志
- [ ] 记录配置变更
- [ ] 更新版本信息
- [ ] 记录已知问题
- [ ] 更新运维手册

### 通知相关方
- [ ] 通知开发团队
- [ ] 通知运维团队
- [ ] 通知业务团队
- [ ] 更新状态页面
- [ ] 发送部署报告

## 定期检查 (Regular Checks)

### 每日检查
- [ ] 服务可用性检查
- [ ] 系统资源使用率
- [ ] 错误日志检查
- [ ] 备份任务状态
- [ ] 安全事件检查

### 每周检查
- [ ] 性能趋势分析
- [ ] 容量规划评估
- [ ] 安全补丁更新
- [ ] 配置漂移检查
- [ ] 灾难恢复演练

### 每月检查
- [ ] SSL证书有效期
- [ ] 系统软件更新
- [ ] 安全策略审查
- [ ] 备份策略评估
- [ ] 文档更新维护

## 应急响应 (Emergency Response)

### 服务中断
- [ ] 立即评估影响范围
- [ ] 启动应急响应流程
- [ ] 切换到备用系统
- [ ] 通知相关人员
- [ ] 记录事件详情

### 安全事件
- [ ] 隔离受影响系统
- [ ] 保存证据和日志
- [ ] 评估安全影响
- [ ] 修复安全漏洞
- [ ] 加强监控措施

### 数据问题
- [ ] 停止相关操作
- [ ] 评估数据损失
- [ ] 从备份恢复数据
- [ ] 验证数据完整性
- [ ] 分析问题原因

## 联系信息

### 技术团队
- **系统管理员**: [姓名] - [电话] - [邮箱]
- **开发负责人**: [姓名] - [电话] - [邮箱]
- **网络管理员**: [姓名] - [电话] - [邮箱]

### 业务团队
- **产品负责人**: [姓名] - [电话] - [邮箱]
- **业务负责人**: [姓名] - [电话] - [邮箱]

### 外部支持
- **云服务商**: [联系方式]
- **域名服务商**: [联系方式]
- **SSL证书商**: [联系方式]

## 工具和资源

### 监控工具
- 系统监控: `/usr/local/bin/monitoring-dashboard.sh`
- 健康检查: `/usr/local/bin/health-check.sh`
- 日志查看: `/var/log/health-check.log`

### 部署工具
- 自动部署: `docs/deployment-scripts/deploy-production.sh`
- 备份恢复: `docs/deployment-scripts/backup-restore.sh`
- 监控设置: `docs/deployment-scripts/monitoring-setup.sh`

### 文档资源
- 部署架构: `docs/production-deployment-architecture.md`
- 快速指南: `docs/quick-deployment-guide.md`
- 运维手册: `docs/operations-manual.md`

---

**注意**: 此检查清单应根据实际部署情况进行调整和完善。每次部署后都应该回顾和更新此清单。
