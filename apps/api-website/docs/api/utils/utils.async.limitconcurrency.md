<!-- Do not edit this file. It is automatically generated by API Documenter. -->

[Home](./index.md) &gt; [@stratix/utils](./utils.md) &gt; [async](./utils.async.md) &gt; [limitConcurrency](./utils.async.limitconcurrency.md)

## async.limitConcurrency() function

限制异步函数的并发执行数量

此函数接收一个异步函数和最大并发数，返回一个新函数，调用新函数时如果 当前活跃的调用数已达到最大并发数，则会将新的调用放入队列等待，直到有 调用完成后才会执行队列中等待的调用。

**Signature:**

```typescript
export declare function limitConcurrency<T, A extends any[]>(fn: (...args: A) => Promise<T>, maxConcurrent: number): (...args: A) => Promise<T>;
```

## Parameters

<table><thead><tr><th>

Parameter


</th><th>

Type


</th><th>

Description


</th></tr></thead>
<tbody><tr><td>

fn


</td><td>

(...args: A) =&gt; Promise&lt;T&gt;


</td><td>

要限制并发的异步函数


</td></tr>
<tr><td>

maxConcurrent


</td><td>

number


</td><td>

最大并发数，必须大于0


</td></tr>
</tbody></table>
**Returns:**

(...args: A) =&gt; Promise&lt;T&gt;

具有相同签名但并发受限的新函数

## Exceptions

`Error` 如果maxConcurrent不是正数

## Remarks

版本: 1.0.0 分类: 并发控制

## Example


```typescript
// 基本使用 - 限制API请求并发数
const fetchWithLimit = limitConcurrency(
  async (url) => {
    const response = await fetch(url);
    return response.json();
  },
  3 // 最多同时执行3个请求
);

// 现在可以随意调用，但最多只会有3个并发请求
const results = await Promise.all([
  fetchWithLimit('https://api.example.com/users'),
  fetchWithLimit('https://api.example.com/posts'),
  fetchWithLimit('https://api.example.com/comments'),
  fetchWithLimit('https://api.example.com/todos'),
  fetchWithLimit('https://api.example.com/photos')
]);

// 错误处理
try {
  const data = await fetchWithLimit('https://api.example.com/invalid');
} catch (error) {
  console.error('请求失败但不会影响队列中其他请求:', error);
}
```

