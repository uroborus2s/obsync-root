<!-- Do not edit this file. It is automatically generated by API Documenter. -->

[Home](./index.md) &gt; [@stratix/utils](./utils.md) &gt; [performance\_2](./utils.performance_2.md) &gt; [asyncCache](./utils.performance_2.asynccache.md)

## performance\_2.asyncCache() function

为异步函数创建带缓存的版本

将异步函数包装为带缓存功能的版本，相同参数的调用只执行一次，后续调用使用缓存结果。 支持TTL、最大缓存项、键生成等配置选项。

**Signature:**

```typescript
export declare function asyncCache<T, A extends any[]>(fn: (...args: A) => Promise<T>, options?: AsyncCacheOptions<T, A>): CacheableFunction<T, A>;
```

## Parameters

<table><thead><tr><th>

Parameter


</th><th>

Type


</th><th>

Description


</th></tr></thead>
<tbody><tr><td>

fn


</td><td>

(...args: A) =&gt; Promise&lt;T&gt;


</td><td>

要缓存的异步函数


</td></tr>
<tr><td>

options


</td><td>

[AsyncCacheOptions](./utils.performance_2.asynccacheoptions.md)<!-- -->&lt;T, A&gt;


</td><td>

_(Optional)_ 缓存选项


</td></tr>
</tbody></table>
**Returns:**

CacheableFunction&lt;T, A&gt;

带缓存功能的包装函数

## Remarks

版本: 1.0.0 分类: 性能优化

## Example


```typescript
// 创建带缓存的API请求函数
const cachedFetchUser = asyncCache(
  async (userId) => {
    const response = await fetch(`/api/users/${userId}`);
    return response.json();
  },
  { ttl: 60000 } // 缓存60秒
);

// 第一次调用会发起请求
const user1 = await cachedFetchUser('123');

// 相同参数的第二次调用会使用缓存，不会发起新请求
const user2 = await cachedFetchUser('123');

// 清除特定缓存项
cachedFetchUser.clearCache('123');

// 清除所有缓存
cachedFetchUser.clearAllCache();
```

