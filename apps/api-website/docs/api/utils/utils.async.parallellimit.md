<!-- Do not edit this file. It is automatically generated by API Documenter. -->

[Home](./index.md) &gt; [@stratix/utils](./utils.md) &gt; [async](./utils.async.md) &gt; [parallelLimit](./utils.async.parallellimit.md)

## async.parallelLimit() function

并行执行异步任务，同时限制最大并发数

此函数接收一个异步任务数组，并控制同时执行的任务数量。当任务数量超过 指定的并发限制时，将等待部分任务完成后再执行新任务。返回的结果顺序与输入任务顺序一致。

**Signature:**

```typescript
export declare function parallelLimit<T>(tasks: Array<() => Promise<T>>, limit: number): Promise<T[]>;
```

## Parameters

<table><thead><tr><th>

Parameter


</th><th>

Type


</th><th>

Description


</th></tr></thead>
<tbody><tr><td>

tasks


</td><td>

Array&lt;() =&gt; Promise&lt;T&gt;&gt;


</td><td>

返回Promise的函数数组


</td></tr>
<tr><td>

limit


</td><td>

number


</td><td>

最大并发数，必须大于0


</td></tr>
</tbody></table>
**Returns:**

Promise&lt;T\[\]&gt;

Promise，解析为所有任务结果的数组，与任务顺序相同

## Exceptions

`TypeError` 如果tasks不是数组或limit不是正数

如果任何一个任务失败，整个操作都会失败

## Remarks

版本: 1.0.0 分类: 并发控制

## Example


```typescript
// 基本使用 - 并发获取多个API，限制并发数为2
const fetchApis = [
  () => fetch('https://api.example.com/users').then(r => r.json()),
  () => fetch('https://api.example.com/posts').then(r => r.json()),
  () => fetch('https://api.example.com/comments').then(r => r.json()),
  () => fetch('https://api.example.com/todos').then(r => r.json())
];

const results = await parallelLimit(fetchApis, 2);
// results包含所有API结果的数组，顺序与fetchApis相同

// 错误处理
const tasksWithErrors = [
  async () => { return 'task1' },
  async () => { throw new Error('任务2失败') },
  async () => { return 'task3' }
];

try {
  const results = await parallelLimit(tasksWithErrors, 2);
} catch (error) {
  console.error('任务执行失败:', error.message);
  // 任何一个任务失败，整个操作都会失败
}
```

