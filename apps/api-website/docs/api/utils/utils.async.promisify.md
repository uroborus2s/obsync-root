<!-- Do not edit this file. It is automatically generated by API Documenter. -->

[Home](./index.md) &gt; [@stratix/utils](./utils.md) &gt; [async](./utils.async.md) &gt; [promisify](./utils.async.promisify.md)

## async.promisify() function

将Node.js风格的回调函数转换为返回Promise的函数

此函数将遵循Node.js回调模式的函数（最后一个参数为(err, result) =<!-- -->&gt; {<!-- -->}<!-- -->） 转换为返回Promise的函数，使其可以与async/await一起使用。

**Signature:**

```typescript
export declare function promisify<T = any>(fn: (...args: any[]) => void): (...args: any[]) => Promise<T>;
```

## Parameters

<table><thead><tr><th>

Parameter


</th><th>

Type


</th><th>

Description


</th></tr></thead>
<tbody><tr><td>

fn


</td><td>

(...args: any\[\]) =&gt; void


</td><td>

遵循Node.js回调模式的函数


</td></tr>
</tbody></table>
**Returns:**

(...args: any\[\]) =&gt; Promise&lt;T&gt;

返回Promise的新函数

## Exceptions

`TypeError` 如果fn不是函数

如果原始回调接收到错误（err参数不为null）

## Remarks

版本: 1.0.0 分类: 函数转换

## Example


```typescript
// 将Node.js的fs.readFile转换为Promise版本
import * as fs from 'fs';

const readFileAsync = promisify(fs.readFile);

// 使用async/await调用
async function readConfig() {
  try {
    const data = await readFileAsync('config.json', 'utf8');
    return JSON.parse(data);
  } catch (err) {
    console.error('读取配置文件失败:', err);
    return {};
  }
}

// 处理多个返回值
// 某些Node.js API会在回调中提供多个参数
function multiResult(callback) {
  callback(null, 'value1', 'value2', 'value3');
}

const multiResultAsync = promisify(multiResult);

// 结果将是一个数组 ['value1', 'value2', 'value3']
const results = await multiResultAsync();
```

