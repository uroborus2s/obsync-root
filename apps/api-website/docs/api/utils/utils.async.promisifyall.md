<!-- Do not edit this file. It is automatically generated by API Documenter. -->

[Home](./index.md) &gt; [@stratix/utils](./utils.md) &gt; [async](./utils.async.md) &gt; [promisifyAll](./utils.async.promisifyall.md)

## async.promisifyAll() function

将对象的多个回调风格函数转换为Promise风格

此函数遍历对象的指定方法（或全部方法），将每个回调风格的方法转换为 返回Promise的方法，并添加Async后缀。原始方法保持不变。

**Signature:**

```typescript
export declare function promisifyAll<T extends Record<string, any>>(target: T, methods?: (keyof T)[]): PromisifiedObject<T>;
```

## Parameters

<table><thead><tr><th>

Parameter


</th><th>

Type


</th><th>

Description


</th></tr></thead>
<tbody><tr><td>

target


</td><td>

T


</td><td>

包含回调风格方法的对象


</td></tr>
<tr><td>

methods


</td><td>

(keyof T)\[\]


</td><td>

_(Optional)_ 要转换的方法名的字符串数组（如果不提供，则尝试转换所有函数）


</td></tr>
</tbody></table>
**Returns:**

[PromisifiedObject](./utils.async.promisifiedobject.md)<!-- -->&lt;T&gt;

包含Promise版本方法的新对象

## Exceptions

`TypeError` 如果target不是对象

## Remarks

版本: 1.0.0 分类: 函数转换

## Example


```typescript
// 基本使用 - 转换特定方法
import * as fs from 'fs';

const fsAsync = promisifyAll(fs, ['readFile', 'writeFile']);

// 现在可以使用Promise版本的方法
async function copyFile(source, target) {
  const data = await fsAsync.readFileAsync(source);
  await fsAsync.writeFileAsync(target, data);
  console.log('文件复制完成');
}

// 转换所有方法
const redisClient = createRedisClient();
const asyncRedis = promisifyAll(redisClient);

// 使用Promise版本
async function cacheData() {
  await asyncRedis.setAsync('key', 'value');
  const value = await asyncRedis.getAsync('key');
  console.log(value); // 'value'
}
```

