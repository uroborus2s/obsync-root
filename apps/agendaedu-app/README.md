# AgendaEdu App

智能课程管理与考勤系统前端应用

## 功能特性

### 学生签到功能 ✨

全新设计的学生签到页面，提供现代化的用户体验：

#### 🎨 界面设计
- **渐变背景**：采用蓝色渐变背景，提升视觉效果
- **学生信息卡片**：圆形头像 + 学生基本信息展示
- **课程信息展示**：网格布局显示课程详情（日期、时间、教室、教师）
- **装饰性元素**：添加圆形装饰背景，增强设计感

#### ⏰ 时间控制逻辑
- **签到按钮**：只能在 `auto_start_time` 和 `auto_close_time` 之间点击
- **请假按钮**：只能在 `auto_start_time` 之前点击
- **实时时间显示**：每秒更新当前时间
- **按钮状态**：不在有效时间范围内时按钮变为灰色不可点击

#### 📍 地理位置功能
- **WPS JSAPI集成**：优先使用WPS协作的地理位置API
- **浏览器API备用**：在非WPS环境中使用浏览器原生地理位置API
- **位置信息显示**：显示详细的经纬度和地址信息
- **位置验证**：签到前必须获取位置信息

#### 🚀 技术实现
- **LocationHelper工具类**：统一的位置获取接口
- **实时状态管理**：React状态管理位置信息和时间状态
- **错误处理**：完善的错误提示和重试机制
- **类型安全**：完整的TypeScript类型定义

### 移除的功能
- ❌ 班级统计信息（根据需求移除）

## 使用方法

### 访问签到页面
```
/student?id={课程ID}
```

### 签到流程
1. 页面加载后显示学生和课程信息
2. 点击"获取位置"按钮获取当前位置
3. 在有效时间范围内点击"签到"按钮完成签到
4. 系统会验证时间和位置信息

### 请假流程
1. 在课程开始时间之前访问页面
2. 点击"请假"按钮提交请假申请

## 开发环境

```bash
# 安装依赖
npm install

# 启动开发服务器
npm run dev

# 构建生产版本
npm run build
```

## 技术栈

- **React 18** - 用户界面框架
- **TypeScript** - 类型安全
- **Tailwind CSS** - 样式框架
- **Lucide React** - 图标库
- **WPS协作JSAPI** - 地理位置和其他原生功能

## API集成

### 地理位置API
- `window.ksoxz_sdk.getLocationInfo()` - WPS协作地理位置API
- `navigator.geolocation` - 浏览器原生地理位置API

### 签到API
- `POST /attendance/{id}/checkin` - 学生签到
- `POST /attendance/{id}/leave` - 学生请假
- `GET /attendance/{id}/record?type=student` - 获取签到记录

## 浏览器兼容性

- Chrome 80+
- Safari 13+
- Firefox 75+
- Edge 80+

## 注意事项

1. **位置权限**：首次使用需要用户授权位置访问权限
2. **时间同步**：确保设备时间准确，影响签到时间判断
3. **网络连接**：需要稳定的网络连接进行API调用
4. **WPS环境**：在WPS协作环境中可获得更好的功能体验
