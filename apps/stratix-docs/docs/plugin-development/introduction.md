---
sidebar_position: 1
---

# 插件开发简介

**思齐框架 (`@stratix/core`)** 的精髓在于其强大的插件化架构。它不仅是框架自身功能扩展的方式，更是您组织和构建复杂业务逻辑的最佳实践。通过将相关功能封装到独立的插件中，您可以实现无与伦比的模块化、可复用性和可维护性。

## 为什么需要插件？

想象一下您正在构建一个大型电商应用，它可能包含以下功能模块：

- 用户认证 (Authentication)
- 商品目录 (Product Catalog)
- 购物车 (Shopping Cart)
- 订单处理 (Order Processing)
- 支付网关 (Payment Gateway)
- 日志与监控 (Logging & Monitoring)

如果不采用插件化架构，所有这些功能的控制器、服务、数据库模型都将混杂在主应用中，随着业务的增长，项目会迅速变得难以管理。而通过插件，您可以将每个功能模块都作为一个独立的“微应用”来开发。

## 插件的核心：`withRegisterAutoDI`

`withRegisterAutoDI` 是您需要了解的最核心的 API。它是一个高阶函数，能够将一个普通的 Fastify 插件“增强”为具备思齐框架特性的超级插件。

一个增强后的插件会获得：

- **独立的依赖注入容器**: 每个插件内部的依赖关系都是隔离的，避免了命名冲突和意外的相互影响。
- **自动化的能力**: 插件能够自动发现和注册其内部的控制器、服务和执行器。
- **统一的生命周期**: 插件内的服务可以无缝地融入到整个应用的生命周期管理中。

## 插件的边界与通信

插件化架构的一个重要原则是**明确边界**。默认情况下，一个插件的内部组件（如服务）对外部是不可见的。这强制实现了高内聚和低耦合。

那么，当一个插件需要与另一个插件通信时该怎么办？例如，`OrderPlugin` 需要调用 `ProductPlugin` 的服务来检查库存。

思齐框架为此提供了**服务适配器 (Service Adapter)** 模式。一个插件可以显式地将其内部的某个服务“暴露”为一个适配器。这个适配器会被注册到应用的**根容器**中，从而成为一个所有插件都可以注入和使用的公共服务。

这种机制确保了插件间的通信是受控的、明确的，而不是混乱的直接调用。

## 插件开发之旅

在本章节的后续部分，我们将引导您：

1.  [创建一个简单的插件](./creating-a-plugin.md)，了解基本流程。
2.  深入理解[插件内的依赖注入](./plugin-di.md)和隔离机制。
3.  学习如何利用[插件的生命周期](./plugin-lifecycle.md)来管理资源。

准备好构建您的第一个可复用功能模块了吗？让我们开始吧！
