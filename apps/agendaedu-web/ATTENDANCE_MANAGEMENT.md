# 考勤管理系统

基于手机端考勤数据的Web端管理界面，提供三个维度的考勤数据查询和统计分析。

## 功能概述

### 主要特性
- **三维度查询**: 支持课程维度、学生维度、统计维度的考勤数据查询
- **实时数据**: 直接对接后端API，获取最新的考勤信息
- **可视化展示**: 丰富的图表和统计卡片，直观展示考勤情况
- **响应式设计**: 适配各种屏幕尺寸的现代化界面

### 界面结构

#### 总览页面 (`AttendanceOverview`)
- 整体考勤统计卡片
- 关键指标展示
- 系统状态监控

#### 课程考勤页面 (`CourseAttendanceTab`)
- **本节课签到**: 当前课程列表和实时考勤状态
- **历史统计**: 历史考勤记录和趋势分析
- 课程详情查看和学生签到列表

#### 学生考勤页面 (`StudentAttendanceTab`)
- 学生个人考勤统计
- 出勤率排名和对比
- 详细的考勤记录查询

#### 统计分析页面 (`StatsAttendanceTab`)
- **统计概览**: 整体数据汇总和关键指标
- **学生排名**: 按出勤率排序的学生榜单
- **趋势分析**: 课程和班级对比分析

## 技术实现

### 架构设计
```
/features/attendance/
├── pages/
│   └── attendance-page.tsx          # 主页面路由
├── components/
│   ├── attendance-overview.tsx      # 总览组件
│   ├── course-attendance-tab.tsx    # 课程考勤标签页
│   ├── student-attendance-tab.tsx   # 学生考勤标签页
│   └── stats-attendance-tab.tsx     # 统计分析标签页
└── types/
    └── attendance.types.ts          # 类型定义
```

### API服务 (`attendance-api.ts`)
- **课程维度**: `getCourseAttendanceRecords()`, `getCourseAttendanceDetail()`
- **学生维度**: `getStudentPersonalStats()`, `getStudentAttendanceRecords()`
- **统计维度**: `getOverallStats()`, `getClassAttendanceRanking()`
- **工具方法**: `exportAttendanceData()`, `searchStudents()`

### 数据流程

1. **页面加载**: 自动获取总览数据和基础统计
2. **交互查询**: 支持搜索、筛选、分页等操作
3. **详情展示**: 点击查看具体课程或学生的详细信息
4. **数据导出**: 支持Excel/CSV格式的数据导出

## 数据对应关系

### 与手机端数据映射
根据您提供的手机端截图，Web端完整还原了以下数据结构：

**课程统计**:
- 总课程节数: 8
- 平均出勤率: 12.1%
- 总请假次数: 2
- 总缺勤次数: 209

**学生个人数据**:
- 庄凯 (学号2401): 8总课时, 1签到, 0请假, 7缺勤, 出勤率12.5%
- 刘子杰 (学号2402): 相同的考勤记录

**历史记录**:
- 18周 (未开始): 2025/07/03 15:30-17:05
- 16周 (已结束): 2025/06/19 15:30-17:05, 出勤率97.1%
- 14周 (已结束): 2025/06/05 15:30-17:05, 出勤率0.0%
- 10周 (已结束): 2025/05/08 15:30-17:05, 出勤率0.0%

## 特色功能

### 1. 智能搜索
- 支持课程名称、开课号、学生姓名、学号的模糊搜索
- 实时筛选和结果展示

### 2. 多维度统计
- 课程维度: 按课程查看考勤情况
- 学生维度: 按学生查看个人考勤记录
- 统计维度: 整体数据分析和排名

### 3. 可视化展示
- 进度条显示出勤率
- 彩色徽章区分考勤状态
- 统计卡片直观展示关键数据

### 4. 响应式适配
- 移动端友好的布局设计
- 自适应表格和卡片组件
- 触摸友好的交互体验

## 使用说明

### 访问路径
- 主入口: `/attendance`
- 通过左侧导航栏的"考勤管理"进入

### 操作流程

1. **查看总览**: 了解整体考勤情况和关键指标
2. **课程考勤**: 查看具体课程的签到情况和历史记录
3. **学生考勤**: 搜索和查看学生的个人考勤统计
4. **统计分析**: 查看排名和趋势分析，导出数据报告

### 权限控制
- 需要通过WPS授权登录
- 支持401错误自动重定向到授权页面
- 所有API请求包含身份验证

## 开发说明

### 依赖组件
- 使用项目内的UI组件库 (`@/components/ui/*`)
- 集成现有的认证系统
- 复用布局组件 (`Header`, `Main`)

### 错误处理
- 网络错误的友好提示
- 加载状态的优雅展示
- 空数据状态的处理

### 性能优化
- 分页加载大量数据
- 组件懒加载
- API请求缓存和去重

## 未来扩展

### 计划功能
- 实时数据推送和自动刷新
- 更丰富的图表和可视化组件
- 批量操作和数据管理功能
- 考勤规则配置和自定义报表

### 技术优化
- 添加单元测试和集成测试
- 性能监控和错误追踪
- 国际化支持
- 无障碍访问优化

---

该系统成功将手机端的考勤数据转换为功能完整的Web端管理界面，提供了更强大的查询、统计和分析能力。 